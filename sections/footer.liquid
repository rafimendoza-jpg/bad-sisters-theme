{%- comment -%} Section: Footer {%- endcomment -%}

<footer class="site-footer" data-section-id="{{ section.id }}">
  <div class="page-width">
    <div class="footer__grid">
      {%- for block in section.blocks -%}
        <div class="footer__col" {{ block.shopify_attributes }}>
          {%- case block.type -%}

            {%- when 'menu' -%}
              {%- if block.settings.heading != blank -%}
                <h4 class="footer__col-title">{{ block.settings.heading }}</h4>
              {%- endif -%}
              <div class="footer__links">
                {%- for link in block.settings.menu.links -%}
                  <a href="{{ link.url }}">{{ link.title }}</a>
                {%- endfor -%}
              </div>

            {%- when 'text' -%}
              {%- if block.settings.heading != blank -%}
                <h4 class="footer__col-title">{{ block.settings.heading }}</h4>
              {%- endif -%}
              <div class="footer__text">
                {{ block.settings.text }}
              </div>
              {%- if section.settings.show_social -%}
                <div class="footer__social">
                  {%- if settings.social_instagram != blank -%}
                    <a href="{{ settings.social_instagram }}" target="_blank" rel="noopener" aria-label="Instagram">
                      {% render 'icon-instagram' %}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_facebook != blank -%}
                    <a href="{{ settings.social_facebook }}" target="_blank" rel="noopener" aria-label="Facebook">
                      {% render 'icon-facebook' %}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_tiktok != blank -%}
                    <a href="{{ settings.social_tiktok }}" target="_blank" rel="noopener" aria-label="TikTok">
                      {% render 'icon-tiktok' %}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_pinterest != blank -%}
                    <a href="{{ settings.social_pinterest }}" target="_blank" rel="noopener" aria-label="Pinterest">
                      {% render 'icon-pinterest' %}
                    </a>
                  {%- endif -%}
                </div>
              {%- endif -%}

            {%- when 'newsletter' -%}
              {%- if block.settings.heading != blank -%}
                <h4 class="footer__col-title">{{ block.settings.heading }}</h4>
              {%- endif -%}
              {%- if block.settings.text != blank -%}
                <p style="opacity: 0.75; font-size: 0.9rem; margin-bottom: 0.75rem;">{{ block.settings.text }}</p>
              {%- endif -%}
              {%- form 'customer', class: 'footer__newsletter-form' -%}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <input
                  type="email"
                  name="contact[email]"
                  placeholder="{{ block.settings.placeholder | default: 'Tu email' }}"
                  required
                  autocomplete="email"
                >
                <button type="submit" class="btn btn--accent">
                  {{ block.settings.button_text | default: 'Suscribir' }}
                </button>
              {%- endform -%}

          {%- endcase -%}
        </div>
      {%- endfor -%}
    </div>

    <div class="footer__bottom">
      <p>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. Todos los derechos reservados.</p>
      {%- if section.settings.show_payment_icons -%}
        <div class="footer__payment-icons">
          {%- for type in shop.enabled_payment_types -%}
            {{ type | payment_type_svg_tag }}
          {%- endfor -%}
        </div>
      {%- endif -%}
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Pie de página",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Mostrar redes sociales",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Mostrar íconos de pago",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "menu",
      "name": "Menú",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Título",
          "default": "Enlaces"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menú",
          "default": "footer"
        }
      ]
    },
    {
      "type": "text",
      "name": "Texto",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Título",
          "default": "Sobre nosotras"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Texto",
          "default": "<p>Bad Sisters Design — Diseño con actitud.</p>"
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Título",
          "default": "Newsletter"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Texto",
          "default": "Suscríbete para recibir ofertas exclusivas."
        },
        {
          "type": "text",
          "id": "placeholder",
          "label": "Placeholder del email",
          "default": "Tu email"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Texto del botón",
          "default": "Suscribir"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      { "type": "text" },
      { "type": "menu" },
      { "type": "menu" },
      { "type": "newsletter" }
    ]
  }
}
{% endschema %}
