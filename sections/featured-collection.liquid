{%- comment -%} Section: Featured Collection — Editable desde Shopify {%- endcomment -%}

<section class="section-padding" data-section-id="{{ section.id }}" data-animate>
  <div class="page-width">
    {%- if section.settings.heading != blank -%}
      <div class="text-center mb-4">
        {%- if section.settings.subheading != blank -%}
          <p style="font-size: 0.8rem; letter-spacing: 0.15em; text-transform: uppercase; color: var(--color-accent); margin-bottom: 0.5rem;">
            {{ section.settings.subheading }}
          </p>
        {%- endif -%}
        <h2>{{ section.settings.heading }}</h2>
        {%- if section.settings.description != blank -%}
          <p style="max-width: 600px; margin: 0.75rem auto 0;">{{ section.settings.description }}</p>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- if section.settings.collection != blank -%}
      {%- assign collection = section.settings.collection -%}
      <div class="grid grid--{{ section.settings.columns }}">
        {%- for product in collection.products limit: section.settings.products_to_show -%}
          {% render 'product-card', product: product, show_vendor: section.settings.show_vendor %}
        {%- endfor -%}
      </div>

      {%- if section.settings.show_view_all -%}
        <div class="text-center mt-4">
          <a href="{{ collection.url }}" class="btn btn--secondary">
            {{ section.settings.view_all_text | default: 'Ver todos' }}
          </a>
        </div>
      {%- endif -%}
    {%- else -%}
      <div class="grid grid--{{ section.settings.columns }}">
        {%- for i in (1..section.settings.products_to_show) -%}
          <div class="product-card">
            <div class="product-card__media">
              {{ 'product-' | append: i | placeholder_svg_tag: 'placeholder-svg' }}
            </div>
            <div class="product-card__info">
              <p class="product-card__title">Producto de ejemplo {{ i }}</p>
              <div class="product-card__price">{{ 29900 | money }}</div>
            </div>
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Colección destacada",
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "Subtítulo",
      "default": "Lo más nuevo"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Título",
      "default": "Productos destacados"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Descripción"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Colección"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Productos a mostrar",
      "default": 4
    },
    {
      "type": "select",
      "id": "columns",
      "label": "Columnas",
      "options": [
        { "value": "2", "label": "2 columnas" },
        { "value": "3", "label": "3 columnas" },
        { "value": "4", "label": "4 columnas" }
      ],
      "default": "4"
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Mostrar marca",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Mostrar botón 'Ver todos'",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "Texto del botón",
      "default": "Ver toda la colección"
    }
  ],
  "presets": [
    {
      "name": "Colección destacada"
    }
  ]
}
{% endschema %}
