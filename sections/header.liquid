{%- comment -%} Section: Header {%- endcomment -%}

<header class="site-header" data-section-id="{{ section.id }}">
  <div class="page-width">
    <div class="header__inner">
      {%- comment -%} Mobile Menu Toggle {%- endcomment -%}
      <button class="mobile-menu-toggle" aria-label="Menú">
        <span></span>
        <span></span>
        <span></span>
      </button>

      {%- comment -%} Logo {%- endcomment -%}
      <div class="header__logo">
        <a href="/" title="{{ shop.name }}">
          {%- if section.settings.logo != blank -%}
            <img
              src="{{ section.settings.logo | image_url: width: 300 }}"
              srcset="{{ section.settings.logo | image_url: width: 150 }} 150w, {{ section.settings.logo | image_url: width: 300 }} 300w"
              sizes="{{ section.settings.logo_width }}px"
              alt="{{ shop.name }}"
              width="{{ section.settings.logo.width }}"
              height="{{ section.settings.logo.height }}"
              loading="eager"
              fetchpriority="high"
              decoding="async"
              style="max-width: {{ section.settings.logo_width }}px;"
            >
          {%- else -%}
            <span class="header__logo-text">{{ shop.name }}</span>
          {%- endif -%}
        </a>
      </div>

      {%- comment -%} Navigation {%- endcomment -%}
      <nav class="header__nav" aria-label="Navegación principal">
        {%- for link in section.settings.menu.links -%}
          <a href="{{ link.url }}" class="header__nav-link{% if link.active %} active{% endif %}">
            {{ link.title }}
          </a>
        {%- endfor -%}
      </nav>

      {%- comment -%} Icons: Search + Cart {%- endcomment -%}
      <div class="header__icons">
        {%- if section.settings.show_search -%}
          <a href="/search" class="header__icon header__search-toggle" aria-label="Buscar">
            {% render 'icon-search' %}
          </a>
        {%- endif -%}

        <a href="/cart" class="header__icon" aria-label="Carrito">
          {% render 'icon-cart' %}
          <span class="header__cart-count" style="{% if cart.item_count == 0 %}display:none{% endif %}">
            {{ cart.item_count }}
          </span>
        </a>

        {%- if shop.customer_accounts_enabled -%}
          <a href="{%- if customer -%}/account{%- else -%}/account/login{%- endif -%}" class="header__icon" aria-label="Cuenta">
            {% render 'icon-account' %}
          </a>
        {%- endif -%}
      </div>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "Encabezado",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Ancho del logo",
      "default": 150
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menú de navegación",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Mostrar ícono de búsqueda",
      "default": true
    }
  ]
}
{% endschema %}
