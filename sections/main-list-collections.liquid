{%- comment -%} Section: List Collections {%- endcomment -%}

<section class="section-padding" data-section-id="{{ section.id }}">
  <div class="page-width">
    <div class="text-center mb-4">
      <h1>{{ section.settings.heading | default: 'Colecciones' }}</h1>
    </div>

    <div class="grid grid--{{ section.settings.columns }}">
      {%- for collection in collections -%}
        {%- if collection.products_count > 0 -%}
          <a href="{{ collection.url }}" class="collection-list-card">
            {%- if collection.image -%}
              <img
                src="{{ collection.image | image_url: width: 600 }}"
                srcset="{{ collection.image | image_url: width: 300 }} 300w, {{ collection.image | image_url: width: 450 }} 450w, {{ collection.image | image_url: width: 600 }} 600w"
                sizes="(max-width: 767px) 50vw, 33vw"
                alt="{{ collection.title }}"
                loading="lazy"
                decoding="async"
                width="{{ collection.image.width }}"
                height="{{ collection.image.height }}"
              >
            {%- elsif collection.products.first.featured_image -%}
              <img
                src="{{ collection.products.first.featured_image | image_url: width: 600 }}"
                srcset="{{ collection.products.first.featured_image | image_url: width: 300 }} 300w, {{ collection.products.first.featured_image | image_url: width: 450 }} 450w, {{ collection.products.first.featured_image | image_url: width: 600 }} 600w"
                sizes="(max-width: 767px) 50vw, 33vw"
                alt="{{ collection.title }}"
                loading="lazy"
                decoding="async"
                width="{{ collection.products.first.featured_image.width }}"
                height="{{ collection.products.first.featured_image.height }}"
              >
            {%- else -%}
              {{ 'collection-1' | placeholder_svg_tag: 'placeholder-svg' }}
            {%- endif -%}
            <div class="collection-list-card__overlay">
              <h3 class="collection-list-card__title">{{ collection.title }}</h3>
              <span class="collection-list-card__count">{{ collection.products_count }} productos</span>
            </div>
          </a>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Todas las colecciones",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "TÃ­tulo",
      "default": "Colecciones"
    },
    {
      "type": "select",
      "id": "columns",
      "label": "Columnas",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ],
      "default": "3"
    }
  ]
}
{% endschema %}
