{%- comment -%}
  Snippet: Product Card
  Usage: {% render 'product-card', product: product, show_vendor: true %}
{%- endcomment -%}

<div class="product-card">
  <a href="{{ product.url }}" class="product-card__media">
    {%- if product.compare_at_price > product.price -%}
      <span class="product-card__badge">
        -{{ product.compare_at_price | minus: product.price | times: 100.0 | divided_by: product.compare_at_price | round }}%
      </span>
    {%- elsif product.available == false -%}
      <span class="product-card__badge" style="background-color: var(--color-text-light);">Agotado</span>
    {%- endif -%}

    <button type="button" class="product-card__wishlist" data-wishlist-btn="{{ product.handle }}" aria-label="Agregar a favoritos">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
    </button>

    {%- if product.featured_image -%}
      <img
        src="{{ product.featured_image | image_url: width: 500 }}"
        srcset="{{ product.featured_image | image_url: width: 250 }} 250w, {{ product.featured_image | image_url: width: 400 }} 400w, {{ product.featured_image | image_url: width: 500 }} 500w"
        sizes="(max-width: 480px) 50vw, (max-width: 767px) 33vw, 25vw"
        alt="{{ product.featured_image.alt | default: product.title }}"
        loading="lazy"
        decoding="async"
        width="{{ product.featured_image.width }}"
        height="{{ product.featured_image.height }}"
      >
      {%- if product.images[1] != blank -%}
        <img
          src="{{ product.images[1] | image_url: width: 500 }}"
          srcset="{{ product.images[1] | image_url: width: 250 }} 250w, {{ product.images[1] | image_url: width: 400 }} 400w, {{ product.images[1] | image_url: width: 500 }} 500w"
          sizes="(max-width: 480px) 50vw, (max-width: 767px) 33vw, 25vw"
          alt="{{ product.title }}"
          loading="lazy"
          decoding="async"
          width="{{ product.images[1].width }}"
          height="{{ product.images[1].height }}"
        >
      {%- endif -%}
    {%- else -%}
      {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
    {%- endif -%}

    {%- if product.available -%}
      <span class="product-card__quick-add">Ver producto</span>
    {%- endif -%}
  </a>

  <div class="product-card__info">
    {%- if show_vendor and product.vendor != blank -%}
      <p class="product-card__vendor">{{ product.vendor }}</p>
    {%- endif -%}

    <h3 class="product-card__title">
      <a href="{{ product.url }}">{{ product.title }}</a>
    </h3>

    <div class="product-card__price">
      {%- if product.compare_at_price > product.price -%}
        <span class="product-card__price--sale">{{ product.price | money }}</span>
        <span class="product-card__price--compare">{{ product.compare_at_price | money }}</span>
      {%- else -%}
        <span>{{ product.price | money }}</span>
      {%- endif -%}
    </div>
  </div>
</div>
